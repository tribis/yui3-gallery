YUI.add("gallery-datatable-350-preview",function(a){YUI.add("gallery-datatable-350-preview-core",function(b){var e=b.Attribute.INVALID_VALUE,g=b.Lang,d=g.isFunction,l=g.isObject,h=g.isArray,c=g.isString,k=g.isNumber,f=b.Array,j=b.Object.keys,i;i=b.namespace("DataTable").Core=function(){};i.ATTRS={columns:{validator:h,getter:"_getColumns"},recordType:{setter:"_setRecordType",writeOnce:true},data:{value:[],setter:"_setData",getter:"_getData"},headerView:{validator:"_validateView",writeOnce:true},footerView:{validator:"_validateView",writeOnce:true},bodyView:{validator:"_validateView",writeOnce:true},summary:{value:"",setter:b.Escape.html},caption:{value:""},recordset:{setter:"_setRecordset",getter:"_getRecordset"},columnset:{setter:"_setColumnset",getter:"_getColumnset"}};b.mix(i.prototype,{CAPTION_TEMPLATE:"<caption></caption>",TABLE_TEMPLATE:"<table></table>",getCell:function(n,m){return this.body&&this.body.getCell&&this.body.getCell(n,m);},getColumn:function(p){var o,r,n,s,q,m,t;if(l(p)&&!h(p)){o=p;}else{o=this.get("columns."+p);}if(o){return o;}r=this.get("columns");if(k(p)||h(p)){p=f(p);t=r;for(q=0,m=p.length-1;t&&q<m;++q){t=t[p[q]]&&t[p[q]].children;}return(t&&t[q])||null;}else{if(c(p)){n=[[r,0]];while(n.length){s=n[n.length-1];t=s[0];for(q=s[1];q>=0;--q){o=t[q];if(o.name===p){return o;}}}}}return null;},getRow:function(m){return this.body&&this.body.getCell&&this.body.getRow(m);},_afterCaptionChange:function(m){this._uiUpdateCaption(m.newVal);},_afterColumnsChange:function(m){this._setColumnMap(m.newVal);},_afterSummaryChange:function(m){this._uiUpdateSummary(m.newVal);},bindUI:function(){this.after({captionChange:this._afterCaptionChange,summaryChange:this._afterSummaryChange});},_createRecordClass:function(o){var n,p,m;if(h(o)){n={};for(p=0,m=o.length;p<m;++p){n[o[p]]={};}}else{if(l(o)){n=o;}}return b.Base.create("record",b.Model,[],null,{ATTRS:n});},_getColumns:function(n,m){m=m.slice(8);return(m)?this._columnMap[m]:n;},_getColumnset:function(n,m){return this.get(m.replace(/^columnset/,"columns"));},_getData:function(m){return this.data||m;},_initColumns:function(){var m=this.get("columns"),n=this.get("recordType");if(!m){m=(n&&n.ATTRS)?j(n.ATTRS):[];this.set("columns",m,{silent:true});}this._setColumnMap(m);},_initData:function(){var n=this.get("data"),o,m;if(h(n)){o=this.get("recordType");m=n;n=new b.ModelList();if(o){n.model=o;n.reset(m,{silent:true});}this.set("data",n,{silent:true});}this.data=n;},initializer:function(){this._initColumns();this._initRecordType();this._initData();this._initViewConfig();this.after("columnsChange",this._afterColumnsChange);},_initRecordType:function(){var o,m,p,n;if(!this.get("recordType")){o=this.get("data");m=this._columnMap;if(o.model){p=o.model;}else{if(o.size&&o.size()){p=o.model=o.item(0).constructor;}else{if(h(o)&&o.length){p=(o[0].constructor.ATTRS)?o[0].constructor:this._createRecordClass(j(o[0]));}else{if(j(m).length){p=this._createRecordClass(j(m));}}}}if(p){this.set("recordType",p,{silent:true});if(!m||!m.length){this._initColumns();}}else{n=this.after(["columnsChange","recordTypeChange","dataChange"],function(q){n.detach();if(!this.data.model){this._initRecordType();this.data.model=this.get("recordType");}});}}},_initViewConfig:function(){this._viewConfig={source:this,cssPrefix:this._cssPrefix};this._headerConfig=b.Object(this._viewConfig);this._bodyConfig=b.Object(this._viewConfig);this._footerConfig=b.Object(this._viewConfig);},_parseColumns:function(p,q){var o,m,n;q||(q={});for(o=0,m=p.length;o<m;++o){n=p[o];if(c(n)){p[o]=n={key:n};}if(n.key){q[n.key]=n;}else{if(h(n.children)){this._parseColumns(n.children,q);}}}return q;},_renderBody:function(){var m=this.get("bodyView");if(m){b.mix(this._bodyConfig,{container:this._tableNode,columns:this.get("columns"),modelList:this.data},true);this.body=new m(this._bodyConfig);this.body.addTarget(this);this.body.render();}},_renderFooter:function(n,o){var m=this.get("footerView");if(m){b.mix(this._footerConfig,{container:this._tableNode,columns:this.get("columns"),modelList:this.data},true);this.foot=new m(this._footerConfig);this.foot.addTarget(this);this.foot.render();}},_renderHeader:function(){var m=this.get("headerView");if(m){b.mix(this._headerConfig,{container:this._tableNode,columns:this.get("columns"),modelList:this.data},true);this.head=new m(this._headerConfig);this.head.addTarget(this);this.head.render();}},_renderTable:function(){var m=this.get("caption");if(!this._tableNode){this._tableNode=b.Node.create(this.TABLE_TEMPLATE);}this._tableNode.addClass(this.getClassName("table"));this._uiUpdateSummary(this.get("summary"));this._uiUpdateCaption(m);},renderUI:function(){var m=this.get("contentBox"),n;if(m){this._renderTable();this._renderHeader();this._renderFooter();this._renderBody();n=this._tableNode;if(n){if(!n.inDoc()||!n.ancestor().compareTo(m)){m.append(n);}}}},_setColumnMap:function(m){this._columnMap=this._parseColumns(m);},_setColumnset:function(m){if(m&&m instanceof b.Columnset){m=m.get("definitions");}return h(m)?m:e;},_setData:function(m){if(m===null){m=[];}if(h(m)){if(this.data){if(!this.data.model&&m.length){this.set("recordType",j(m[0]));}this.data.reset(m);}}else{if(m&&m.each&&m.getAttrs){this.data=m;}else{m=e;}}return m;},_setRecordset:function(n){var m;if(n&&n instanceof b.Recordset){m=[];n.each(function(o){m.push(o.get("data"));});n=m;}return n;},_setRecordType:function(n){var m;if(d(n)&&n.prototype.set&&n.prototype.getAttrs){m=n;}else{if(l(n)){m=this._createRecordClass(n);}}return m||e;},_uiUpdateCaption:function(n){var m=this._tableNode.one("> caption");if(n){if(!this._captionNode){this._captionNode=b.Node.create(this.CAPTION_TEMPLATE);}this._captionNode.setContent(n);if(m){if(!m.compareTo(this._captionNode)){m.replace(this._captionNode);}}else{this._tableNode.prepend(this._captionNode);}this._captionNode=m;}else{if(this._captionNode){if(m&&m.compareTo(this._captionNode)){m=null;}this._captionNode.remove(true);delete this._captionNode;}if(m){m.remove(true);}}},_uiUpdateSummary:function(m){this._tableNode.setAttribute("summary",m||"");
},_validateView:function(m){return m===null||(d(m)&&m.prototype.render);}});},"gallery-2012.01.04-22-09",{requires:["model-list"]});YUI.add("gallery-datatable-350-preview-head",function(h){var g=h.Lang.sub,e=h.Lang,b=e.isArray,c=h.Array,f=h.ClassNameManager,d=f.getClassName;h.namespace("DataTable").HeaderView=h.Base.create("tableHeader",h.View,[],{CELL_TEMPLATE:'<th id="{_yuid}" abbr="{abbr}" '+'colspan="{colspan}" rowspan="{rowspan}">'+'<div class="{linerClass}">'+"{content}"+"</div>"+"</th>",ROW_TEMPLATE:"<tr>{content}</tr>",THEAD_TEMPLATE:'<thead class="{classes}">{content}</thead>',getClassName:function(){var i=c(arguments);i.unshift(this._cssPrefix);i.push(true);return d.apply(f,i);},render:function(){var u=this.get("container"),m=this.columns,s=this.source._theadNode,n={abbr:"",colspan:1,rowspan:1,linerClass:this.getClassName("liner")},k,p,r,o,t,l,q;u=h.one(u);if(u&&u.get("tagName")!=="TABLE"){u=u.one("table");}if(!u){return this;}k=u.one("> thead");if(k){if(!k.compareTo(s)){k.replace(s);}else{this._theadNode=k;}}else{s="";if(m.length){for(p=0,r=m.length;p<r;++p){q="";for(o=0,t=m[p].length;o<t;++o){l=m[p][o];q+=g(this.CELL_TEMPLATE,h.merge(n,l,{content:l.label||l.key||("Column "+(o+1))}));}s+=g(this.ROW_TEMPLATE,{content:q});}}this._theadNode=s=h.Node.create(g(this.THEAD_TEMPLATE,{classes:this.getClassName("columns"),content:s}));u.insertBefore(s,u.one("> tfoot, > tbody"));}this.bindUI();return this;},_cssPrefix:f.getClassName("table"),_afterColumnsChange:function(i){this.columns=this._parseColumns(i.newVal);if(this._theadNode){this._theadNode.remove().destroy(true);delete this._theadNode;}this.render();},bindUI:function(){if(this.source&&!this._eventHandles.columnsChange){this._eventHandles.columnsChange=this.source.after("columnsChange",h.bind("_afterColumnsChange",this));}},destructor:function(){(new h.EventHandle(h.Object.values(this._eventHandles))).detach();},initializer:function(i){i||(i={});var j=i.cssPrefix||(i.source||{}).cssPrefix;this.source=i.source;this.columns=this._parseColumns(i.columns);this._eventHandles=[];if(j){this._cssPrefix=j;}},_parseColumns:function(p){var m=[],s=[],r=1,u,v,l,k,t,o,q,n;if(b(p)&&p.length){s.push([p,-1]);while(s.length){u=s[s.length-1];v=u[0];o=u[1]+1;for(q=v.length;o<q;++o){l=v[o];k=l.children;h.stamp(l);if(b(k)&&k.length){s.push([k,-1]);u[1]=o;r=Math.max(r,s.length);break;}else{l.colspan=1;}}if(o>=q){if(s.length>1){u=s[s.length-2];t=u[0][u[1]];t.colspan=0;for(o=0,q=v.length;o<q;++o){t.colspan+=v[o].colspan;v[o].parent=t;}}s.pop();}}for(o=0;o<r;++o){m.push([]);}s.push([p,-1]);while(s.length){u=s[s.length-1];v=u[0];o=u[1]+1;for(q=v.length;o<q;++o){l=v[o];k=l.children;m[s.length-1].push(l);u[1]=o;if(k&&k.length){s.push([k,-1]);break;}else{l.headers=[l._yuid];for(n=s.length-2;n>=0;--n){t=s[n][0][s[n][1]];l.headers.unshift(t._yuid);}l.rowspan=r-s.length+1;}}if(o>=q){s.pop();}}}return m;}});},"gallery-2012.01.04-22-09",{requires:["view","gallery-datatable-350-preview-core"]});YUI.add("gallery-datatable-350-preview-body",function(b){var f=b.Lang,g=f.isArray,j=b.Escape.html,k=b.Lang.sub,d=b.Array,h=b.bind,i=b.Object,c=b.ClassNameManager,e=c.getClassName;b.namespace("DataTable").BodyView=b.Base.create("tableBody",b.View,[],{CELL_TEMPLATE:'<td headers="{headers}" class="{classes}">'+'<div class="{linerClass}">'+"{content}"+"</div>"+"</td>",ROW_TEMPLATE:'<tr id="{clientId}" class="{rowClasses}">'+"{content}"+"</tr>",TBODY_TEMPLATE:'<tbody class="{classes}">{content}</tbody>',getCell:function(n,l){var m=null;if(this._tbodyNode){m=this._tbodyNode.getDOMNode().rows[+n];m&&(m=m.cells[+l]);}return b.one(m);},getClassName:function(){var l=d(arguments);l.unshift(this._cssPrefix);l.push(true);return e.apply(c,l);},getRow:function(l){var m;if(this._tbodyNode){m=this._tbodyNode.getDOMNode().rows[+l];}return b.one(m);},render:function(){var o=this.get("container"),p=this.get("modelList"),m=this.columns,l=this._tbodyNode,n;o=b.one(o);if(o&&o.get("tagName")!=="TABLE"){o=o.one("table");}if(!o){return this;}n=o.one("> ."+this.getClassName("data"));this._createRowTemplate(m);if(n){if(l){if(!n.compareTo(l)){n.replace(l);}}else{this._tbodyNode=n;}}else{if(p){l=b.Node.create(this._createDataHTML(m));this._applyNodeFormatters(l,m);o.append(l);this._tbodyNode=l;}}if(this._tbodyNode){this.bindUI();}return this;},_afterColumnsChange:function(l){this.columns=this._parseColumns(l.newVal);if(this._tbodyNode){this._tbodyNode.remove().destroy(true);delete this._tbodyNode;}this.render();},_afterDataChange:function(l){if(this._tbodyNode){this._tbodyNode.remove().destroy(true);delete this._tbodyNode;}this.render();},_applyNodeFormatters:function(r,m){var l=this.source,p=this.get("modelList"),o=[],t=r.getDOMNode(),n="."+this.getClassName("liner"),q,s;for(q=0,s=m.length;q<s;++q){if(m[q].nodeFormatter){o.push(q);}}if(p&&o.length){p.each(function(y,z){var w={data:y.getAttrs(),record:y,rowindex:z},D=t.rows[z],x,A,v,C,B,u;if(D){for(x=0,A=o.length;x<A;++x){B=b.one(D.cells[o[x]]);if(B){v=w.column=m[o[x]];C=v.key||v._yuid;w.value=y.get(C);w.td=B;w.cell=B.one(n)||B;u=v.nodeFormatter.call(l,w);if(u===false){B.destroy(true);}}}}});}},bindUI:function(){var l=this._eventHandles,m=this.get("modelList");if(this.source&&!l.columnsChange){l.columnsChange=this.source.after("columnsChange",h("_afterColumnsChange",this));}if(!l.dataChange){l.dataChange=m.after(["*:change","*:add","*:remove","*:destroy","*:reset"],h("_afterDataChange",this));}},_cssPrefix:c.getClassName("table"),_createDataHTML:function(m){var n=this.get("modelList"),l="";if(n){n.each(function(p,o){l+=this._createRowHTML(p,o);},this);}return k(this.TBODY_TEMPLATE,{classes:this.getClassName("data"),content:l});},_createRowHTML:function(s,t){var q=s.getAttrs(),w=i(q),l=this.source||this,o=this.columns,r,u,m,n,v,p;w.rowClasses=(t%2)?this.CLASS_ODD:this.CLASS_EVEN;for(r=0,u=o.length;r<u;++r){m=o[r];v=q[m.key];n=m._renderToken||m.key||m._yuid;w[n+"-classes"]="";if(m.formatter){p={value:v,data:q,column:m,record:s,classnames:"",rowindex:t};if(typeof m.formatter==="string"){v=k(m.formatter,p);
}else{v=m.formatter.call(l,p);if(v===undefined){v=p.value;}w[n+"-classes"]=p.classnames;}}if((v===undefined||v==="")&&m.emptyCellValue){v=m.emptyCellValue;}w[n]=m.allowHTML?v:j(v);}return k(this._rowTemplate,w);},_createRowTemplate:function(o){var q="",v=this.CELL_TEMPLATE,u=this.getClassName("liner"),s={},p,r,m,t,n,l;for(p=0,r=o.length;p<r;++p){m=o[p];t=m.key;if(t){if(s[t]){n=t+(s[t]++);m._renderToken=n;}else{n=t;s[t]=1;}}else{n=m.name||m._yuid;}l={content:"{"+n+"}",headers:m.headers.join(" "),linerClass:u,classes:this.getClassName(t)+" {"+n+"-classes}"};if(m.nodeFormatter){l.content="";l.classes="";}q+=k(v,l);}this._rowTemplate=k(this.ROW_TEMPLATE,{content:q});},destructor:function(){(new b.EventHandle(i.values(this._eventHandles))).detach();},initializer:function(l){var m=l.cssPrefix||(l.source||{}).cssPrefix;this.source=l.source;this.columns=this._parseColumns(l.columns);this._tbodyNode=l.tbodyNode;this._eventHandles={};if(m){this._cssPrefix=m;}this.CLASS_ODD=this.getClassName("odd");this.CLASS_EVEN=this.getClassName("even");},_parseColumns:function(p,o){var m,n,l;o||(o=[]);if(g(p)&&p.length){for(n=0,l=p.length;n<l;++n){m=p[n];if(typeof m==="string"){m={key:m};}if(m.key||m.formatter||m.nodeFormatter){m.index=o.length;o.push(m);}else{if(m.children){this._parseColumns(m.children,o);}}}}return o;}});},"gallery-2012.01.04-22-09",{requires:["view","gallery-datatable-350-preview-core"]});a.use("gallery-datatable-350-preview-core","gallery-datatable-350-preview-head","gallery-datatable-350-preview-body");a.DataTable.Base=a.Base.create("datatable",a.Widget,[a.DataTable.Core],null,{ATTRS:{headerView:{value:a.DataTable.HeaderView},bodyView:{value:a.DataTable.BodyView}}});a.DataTable=a.mix(a.Base.create("datatable",a.DataTable.Base,[]),a.DataTable);},"gallery-2012.01.04-22-09",{requires:["base-build","widget","model-list","view","escape"]});