YUI.add("gallery-datatable-350-preview",function(a){YUI.add("gallery-datatable-350-preview-core",function(c){var f=c.Attribute.INVALID_VALUE,h=c.Lang,e=h.isFunction,n=h.isObject,i=h.isArray,d=h.isString,m=h.isNumber,k=h.sub,g=c.Array,l=c.Object.keys,j;function b(q){var r={},p;for(p in q){r[p]=q[p];}return r;}j=c.namespace("DataTable").Core=function(){};j.ATTRS={columns:{validator:i,getter:"_getColumns"},recordType:{setter:"_setRecordType",writeOnce:true},data:{value:[],setter:"_setData",getter:"_getData"},headerView:{validator:"_validateView",writeOnce:true},footerView:{validator:"_validateView",writeOnce:true},bodyView:{validator:"_validateView",writeOnce:true},summary:{value:"",setter:c.Escape.html},caption:{value:""},recordset:{setter:"_setRecordset",getter:"_getRecordset"},columnset:{setter:"_setColumnset",getter:"_getColumnset"}};c.mix(j.prototype,{CAPTION_TEMPLATE:'<caption class="{className}"/>',TABLE_TEMPLATE:'<table role="presentation" class="{className}"/>',TBODY_TEMPLATE:'<tbody class="{className}"/>',TFOOT_TEMPLATE:'<tfoot class="{className}"/>',THEAD_TEMPLATE:'<thead class="{className}"/>',delegate:function(){var o=this.get("contentBox");return o.delegate.apply(o,arguments);},getCell:function(p,o){return this.body&&this.body.getCell&&this.body.getCell(p,o);},getColumn:function(q){var p,s,r,o,t;if(n(q)&&!i(q)){p=q;}else{p=this.get("columns."+q);}if(p){return p;}s=this.get("columns");if(m(q)||i(q)){q=g(q);t=s;for(r=0,o=q.length-1;t&&r<o;++r){t=t[q[r]]&&t[q[r]].children;}return(t&&t[r])||null;}return null;},getRow:function(o){return this.body&&this.body.getRow&&this.body.getRow(o);},syncUI:function(){this._uiSetCaption(this.get("caption"));this._uiSetSummary(this.get("summary"));},_afterColumnsChange:function(o){this._setColumnMap(o.newVal);this._setDisplayColumns(o.newVal);},bindUI:function(){},_createRecordClass:function(q){var p,r,o;if(i(q)){p={};for(r=0,o=q.length;r<o;++r){p[q[r]]={};}}else{if(n(q)){p=q;}}return c.Base.create("record",c.Model,[],null,{ATTRS:p});},_createTable:function(){return c.Node.create(k(this.TABLE_TEMPLATE,{className:this.getClassName("table")}));},_createTBody:function(){return c.Node.create(k(this.TBODY_TEMPLATE,{className:this.getClassName("data")}));},_createTFoot:function(){return c.Node.create(k(this.TFOOT_TEMPLATE,{className:this.getClassName("footer")}));},_createTHead:function(){return c.Node.create(k(this.THEAD_TEMPLATE,{className:this.getClassName("columns")}));},_defRenderBodyFn:function(o){o.view.render();this.body=o.view;this._tbodyNode=o.view.get("container");this._tableNode.append(this._tbodyNode);},_defRenderFooterFn:function(o){o.view.render();this.foot=o.view;this._tfootNode=o.view.get("container");this._tableNode.insertBefore(this._tfootNode,this._tableNode.one("> tbody"));},_defRenderHeaderFn:function(o){o.view.render();this.head=o.view;this._theadNode=o.view.get("container");this._tableNode.insertBefore(this._theadNode,this._tableNode.one("> tfoot, > tbody"));},_defRenderTableFn:function(q){var o,p;this._tableNode=this._createTable();if(q.headerView){p=b(q.headerConfig||{});p.container=this._createTHead();o=new q.headerView(p);o.addTarget(this);this.fire("renderHeader",{view:o});}if(q.footerView){p=b(q.footerConfig||{});p.container=this._createTFoot();o=new q.footerView(p);o.addTarget(this);this.fire("renderFooter",{view:o});}if(q.bodyView){p=b(q.bodyConfig||{});p.container=this._createTBody();o=new q.bodyView(p);o.addTarget(this);this.fire("renderBody",{view:o});}},_getColumns:function(p,o){return o.length>8?this._columnMap:p;},_getColumnset:function(p,o){return this.get(o.replace(/^columnset/,"columns"));},_getData:function(o){return this.data||o;},_initColumns:function(){var o=this.get("columns"),p=this.get("recordType");if(!o){o=(p&&p.ATTRS)?l(p.ATTRS):[];this.set("columns",o,{silent:true});}this._setColumnMap(o);this._setDisplayColumns(o);},_initData:function(){var p=this.get("data"),q,o;if(i(p)){q=this.get("recordType");o=p;p=new c.ModelList();if(q){p.model=q;p.reset(o,{silent:true});}this.set("data",p,{silent:true});}this.data=p;this.data.addTarget(this);},_initEvents:function(){this.publish({renderTable:{fireOnce:true,defaultFn:c.bind("_defRenderTableFn",this)},renderHeader:{fireOnce:true,defaultFn:c.bind("_defRenderHeaderFn",this)},renderBody:{fireOnce:true,defaultFn:c.bind("_defRenderBodyFn",this)},renderFooter:{fireOnce:true,defaultFn:c.bind("_defRenderFooterFn",this)}});},initializer:function(){this._initColumns();this._initRecordType();this._initData();this._initViewConfig();this._initEvents();this.after("columnsChange",this._afterColumnsChange);this._UI_ATTRS={BIND:this._UI_ATTRS.BIND.concat(["caption","summary"]),SYNC:this._UI_ATTRS.SYNC.concat(["caption","summary"])};},_initRecordType:function(){var q,o,r,p;if(!this.get("recordType")){q=this.get("data");o=this._columnMap;if(q.model){r=q.model;}else{if(q.size&&q.size()){r=q.model=q.item(0).constructor;}else{if(i(q)&&q.length){r=(q[0].constructor.ATTRS)?q[0].constructor:this._createRecordClass(l(q[0]));}else{if(l(o).length){r=this._createRecordClass(l(o));}}}}if(r){this.set("recordType",r,{silent:true});if(!o||!o.length){this._initColumns();}}else{p=this.after(["columnsChange","recordTypeChange","dataChange"],function(s){p.detach();if(!this.data.model){this._initRecordType();this.data.model=this.get("recordType");}});}}},_initViewConfig:function(){this._viewConfig={source:this,cssPrefix:this._cssPrefix};this._headerConfig=c.Object(this._viewConfig);this._bodyConfig=c.Object(this._viewConfig);this._footerConfig=c.Object(this._viewConfig);},_parseColumns:function(o){var r={},p={};function q(x){var w,s,t,v,u,y;for(w=0,s=x.length;w<s;++w){t=x[w];if(d(t)){x[w]=t={key:t};}u=c.stamp(t);if(i(t.children)){q(t.children);}else{v=t.key;if(v){r[t.key]=t;}y=t.name||t.key||t._yuid;if(p[y]){y+=(p[y]++);}else{p[y]=1;}t._id=y;r[y]=t;}}}q(o);return r;},renderUI:function(){var o=this.get("contentBox"),p;if(o){this._viewConfig.columns=this.get("columns");this._viewConfig.modelList=this.data;
o.setAttrs({"role":"grid","aria-readonly":true});this.fire("renderTable",{headerView:this.get("headerView"),headerConfig:this._headerConfig,bodyView:this.get("bodyView"),bodyConfig:this._bodyConfig,footerView:this.get("footerView"),footerConfig:this._footerConfig});p=this._tableNode;if(p){if(!p.inDoc()||!p.ancestor().compareTo(o)){o.append(p);}}}},_setColumnMap:function(o){this._columnMap=this._parseColumns(o);},_setColumnset:function(o){if(o&&o instanceof c.Columnset){o=o.get("definitions");}return i(o)?o:f;},_setData:function(o){if(o===null){o=[];}if(i(o)){if(this.data){if(!this.data.model&&o.length){this.set("recordType",l(o[0]));}this.data.reset(o);o=true;}}else{if(o&&o.each&&o.getAttrs){this.data=o;}else{o=f;}}return o;},_setDisplayColumns:function(o){function p(u){var t=[],s,q,r;for(s=0,q=u.length;s<q;++s){r=u[s];if(r.children){t.push.apply(t,p(r.children));}else{t.push(r);}}return t;}this._displayColumns=p(o);},_setRecordset:function(p){var o;if(p&&p instanceof c.Recordset){o=[];p.each(function(q){o.push(q.get("data"));});p=o;}return p;},_setRecordType:function(p){var o;if(e(p)&&p.prototype.set&&p.prototype.getAttrs){o=p;}else{if(n(p)){o=this._createRecordClass(p);}}return o||f;},_uiSetCaption:function(r){var q=this._tableNode,p=this._captionNode,o;if(r){if(!p){this._captionNode=p=c.Node.create(k(this.CAPTION_TEMPLATE,{className:this.getClassName("caption")}));o=c.stamp(p);p.set("id",o);q.prepend(this._captionNode);q.setAttribute("aria-describedby",o);}p.setContent(r);}else{if(p){p.remove(true);delete this._captionNode;q.removeAttribute("aria-describedby");}}},_uiSetSummary:function(o){this._tableNode.setAttribute("summary",o||"");},_uiSetWidth:function(o){if(m(o)){o+=this.DEF_UNIT;}if(d(o)){this._uiSetDim("width",o);this._tableNode.setStyle("width",o);}},_validateView:function(o){return o===null||(e(o)&&o.prototype.render);}});},"gallery-2012.02.01-21-35",{requires:["model-list"]});YUI.add("gallery-datatable-350-preview-head",function(h){var e=h.Lang,g=e.sub,b=e.isArray,c=h.Array,f=h.ClassNameManager,d=f.getClassName;h.namespace("DataTable").HeaderView=h.Base.create("tableHeader",h.View,[],{CELL_TEMPLATE:'<th id="{_yuid}" abbr="{abbr}" colspan="{_colspan}" rowspan="{_rowspan}" class="{className}" role="columnheader" {_headers}>{content}</th>',ROW_TEMPLATE:'<tr role="row">{content}</tr>',getClassName:function(){var i=c(arguments);i.unshift(this._cssPrefix);i.push(true);return d.apply(f,i);},render:function(){var s=this.get("container"),l=this.columns,m={abbr:"",_colspan:1,_rowspan:1},o,q,n,u,k,p,r,t;if(s&&l){p="";if(l.length){for(o=0,q=l.length;o<q;++o){r="";for(n=0,u=l[o].length;n<u;++n){k=l[o][n];t=h.merge(m,k,{className:this.getClassName("header"),content:k.label||k.key||("Column "+(n+1)),headers:""});if(k.className){t.className+=" "+k.className;}if(k._id){t.className+=" "+this.getClassName("col",k._id);}if(k._parent){t._headers='headers="'+k._parent._headers.join(" ")+'"';}r+=g(this.CELL_TEMPLATE,t);}p+=g(this.ROW_TEMPLATE,{content:r});}}s.setContent(p);}this.bindUI();return this;},_cssPrefix:f.getClassName("table"),_afterColumnsChange:function(i){this.columns=this._parseColumns(i.newVal);this.render();},bindUI:function(){if(this.source&&!this._eventHandles.columnsChange){this._eventHandles.columnsChange=this.source.after("columnsChange",h.bind("_afterColumnsChange",this));}},destructor:function(){(new h.EventHandle(h.Object.values(this._eventHandles))).detach();},initializer:function(i){i||(i={});var j=i.cssPrefix||(i.source||{}).cssPrefix;this.source=i.source;this.columns=this._parseColumns(i.columns);this._eventHandles=[];if(j){this._cssPrefix=j;}},_parseColumns:function(p){var m=[],s=[],r=1,u,v,l,k,t,o,q,n;if(b(p)&&p.length){s.push([p,-1]);while(s.length){u=s[s.length-1];v=u[0];o=u[1]+1;for(q=v.length;o<q;++o){l=v[o];k=l.children;h.stamp(l);if(b(k)&&k.length){s.push([k,-1]);u[1]=o;r=Math.max(r,s.length);break;}else{l._colspan=1;}}if(o>=q){if(s.length>1){u=s[s.length-2];t=u[0][u[1]];t._colspan=0;for(o=0,q=v.length;o<q;++o){t._colspan+=v[o]._colspan;v[o]._parent=t;}}s.pop();}}for(o=0;o<r;++o){m.push([]);}s.push([p,-1]);while(s.length){u=s[s.length-1];v=u[0];o=u[1]+1;for(q=v.length;o<q;++o){l=v[o];k=l.children;m[s.length-1].push(l);u[1]=o;l._headers=[l._yuid];for(n=s.length-2;n>=0;--n){t=s[n][0][s[n][1]];l._headers.unshift(t._yuid);}if(k&&k.length){s.push([k,-1]);break;}else{l._rowspan=r-s.length+1;}}if(o>=q){s.pop();}}}return m;}});},"gallery-2012.02.01-21-35",{requires:["view","gallery-datatable-350-preview-core"]});YUI.add("gallery-datatable-350-preview-body",function(b){var f=b.Lang,g=f.isArray,k=f.sub,j=b.Escape.html,d=b.Array,h=b.bind,i=b.Object,c=b.ClassNameManager,e=c.getClassName;b.namespace("DataTable").BodyView=b.Base.create("tableBody",b.View,[],{CELL_TEMPLATE:'<td role="gridcell" headers="{headers}" class="{className}">{content}</td>',ROW_TEMPLATE:'<tr role="row" id="{rowId}" class="{rowClass}">'+"{content}"+"</tr>",getCell:function(o,m){var l=this.get("container"),n;if(l){n=l.getDOMNode().rows[+o];n&&(n=n.cells[+m]);}return b.one(n);},getClassName:function(){var l=d(arguments);l.unshift(this._cssPrefix);l.push(true);return e.apply(c,l);},getRow:function(m){var l=this.get("container");return b.one(l&&l.getDOMNode().rows[+m]);},render:function(){var l=this.get("container"),n=this.get("modelList"),m=this.columns;this._createRowTemplate(m);if(l&&n){l.setContent(this._createDataHTML(m));this._applyNodeFormatters(l,m);}this.bindUI();return this;},_afterColumnsChange:function(l){this.columns=this._parseColumns(l.newVal);this.render();},_afterDataChange:function(l){this.render();},_applyNodeFormatters:function(r,m){var l=this.source,p=this.get("modelList"),o=[],t=r.getDOMNode(),n="."+this.getClassName("liner"),q,s;for(q=0,s=m.length;q<s;++q){if(m[q].nodeFormatter){o.push(q);}}if(p&&o.length){p.each(function(y,z){var w={data:y.toJSON(),record:y,rowindex:z},D=t.rows[z],x,A,v,C,B,u;if(D){for(x=0,A=o.length;x<A;++x){B=b.one(D.cells[o[x]]);if(B){v=w.column=m[o[x]];C=v.key||v._yuid;w.value=y.get(C);w.td=B;
w.cell=B.one(n)||B;u=v.nodeFormatter.call(l,w);if(u===false){B.destroy(true);}}}}});}},bindUI:function(){var l=this._eventHandles,m=this.get("modelList");if(this.source&&!l.columnsChange){l.columnsChange=this.source.after("columnsChange",h("_afterColumnsChange",this));}if(!l.dataChange){l.dataChange=m.after(["*:change","add","remove","reset"],h("_afterDataChange",this));}},_cssPrefix:c.getClassName("table"),_createDataHTML:function(m){var n=this.get("modelList"),l="";if(n){n.each(function(p,o){l+=this._createRowHTML(p,o);},this);}return l;},_createRowHTML:function(s,t){var q=s.toJSON(),w={rowId:s.get("clientId"),rowClass:(t%2)?this.CLASS_ODD:this.CLASS_EVEN},l=this.source||this,o=this.columns,r,u,m,n,v,p;for(r=0,u=o.length;r<u;++r){m=o[r];v=q[m.key];n=m._id;w[n+"-className"]="";if(m.formatter){p={value:v,data:q,column:m,record:s,className:"",rowClass:"",rowindex:t};if(typeof m.formatter==="string"){if(v!==undefined){v=k(m.formatter,p);}}else{v=m.formatter.call(l,p);if(v===undefined){v=p.value;}w[n+"-className"]=p.className;w.rowClass+=" "+p.rowClass;}}if(v===undefined||v===""){v=m.emptyCellValue||"";}w[n]=m.allowHTML?v:j(v);w.rowClass=w.rowClass.replace(/\s+/g," ");}return k(this._rowTemplate,w);},_createRowTemplate:function(n){var q="",t=this.CELL_TEMPLATE,p,r,m,s,o,l;for(p=0,r=n.length;p<r;++p){m=n[p];s=m.key;o=m._id;l={content:"{"+o+"}",headers:(m._headers||[]).join(" "),className:this.getClassName("col",o)+" "+(m.className||"")+" "+this.getClassName("cell")+" {"+o+"-className}"};if(m.nodeFormatter){l.content="";}q+=k(t,l);}this._rowTemplate=k(this.ROW_TEMPLATE,{content:q});},destructor:function(){(new b.EventHandle(i.values(this._eventHandles))).detach();},initializer:function(l){var m=l.cssPrefix||(l.source||{}).cssPrefix;this.source=l.source;this.columns=this._parseColumns(l.columns);this._eventHandles={};if(m){this._cssPrefix=m;}this.CLASS_ODD=this.getClassName("odd");this.CLASS_EVEN=this.getClassName("even");},_parseColumns:function(p,o){var m,n,l;o||(o=[]);if(g(p)&&p.length){for(n=0,l=p.length;n<l;++n){m=p[n];if(typeof m==="string"){m={key:m};}if(m.key||m.formatter||m.nodeFormatter){m.index=o.length;o.push(m);}else{if(m.children){this._parseColumns(m.children,o);}}}}return o;}});},"gallery-2012.02.01-21-35",{requires:["view","gallery-datatable-350-preview-core"]});YUI.add("gallery-datatable-350-preview-base",function(b){b.DataTable.Base=b.Base.create("datatable",b.Widget,[b.DataTable.Core],null,{ATTRS:{headerView:{value:b.DataTable.HeaderView},bodyView:{value:b.DataTable.BodyView}}});b.DataTable=b.mix(b.Base.create("datatable",b.DataTable.Base,[]),b.DataTable);},"gallery-2012.02.01-21-35",{requires:["model-list","view","base-build","widget","escape","gallery-datatable-350-preview-core"]});YUI.add("gallery-datatable-350-preview-mutable",function(b){var d=b.Array,g=b.Lang,c=g.isString,e=g.isArray,j=g.isObject,i=g.isNumber,h=b.Array.indexOf,f;b.namespace("DataTable").Mutable=f=function(){};f.ATTRS={autoSync:{}};b.mix(f.prototype,{addColumn:function(l,k){if(c(l)){l={key:l};}if(l){if(arguments.length<2||(!i(k)&&!e(k))){k=this.get("columns").length;}this.fire("addColumn",{column:l,index:k});}return this;},modifyColumn:function(l,k){if(c(k)){k={key:k};}if(j(k)){this.fire("modifyColumn",{column:l,newColumnDef:k});}return this;},moveColumn:function(l,k){if(l&&(i(k)||e(k))){this.fire("moveColumn",{column:l,index:k});}return this;},removeColumn:function(k){if(k){this.fire("removeColumn",{column:k});}return this;},addRow:function(p,m){var o=(m&&("sync" in m))?m.sync:this.get("autoSync"),q,n,k,l;if(this.data){q=this.data.add.apply(this.data,arguments);if(o){q=d(q);l=d(arguments,1,true);for(n=0,k=q.length;n<k;++n){q[n].save.apply(q[n],l);}}}return this;},removeRow:function(l,n){var m=this.data,s=(n&&("sync" in n))?n.sync:this.get("autoSync"),k,p,o,q,r;if(j(l)&&l instanceof this.get("recordType")){p=l;}else{if(m&&l!==undefined){p=m.getById(l)||m.getByClientId(l)||m.item(l);}}if(p){r=d(arguments,1,true);k=m.remove.apply(m,[p].concat(r));if(s){if(!j(r[0])){r.unshift({});}r[0]["delete"]=true;k=d(k);for(o=0,q=k.length;o<q;++o){p=k[o];p.destroy.apply(p,r);}}}return this;},modifyRow:function(q,p,m){var n=this.data,o=(m&&("sync" in m))?m.sync:this.get("autoSync"),l,k;if(j(q)&&q instanceof this.get("recordType")){l=q;}else{if(n&&q!==undefined){l=n.getById(q)||n.getByClientId(q)||n.item(q);}}if(l&&j(p)){k=d(arguments,1,true);l.setAttrs.apply(l,k);if(o){l.save.apply(l,k);}}return this;},_defAddColumnFn:function(p){var l=d(p.index),n=this.get("columns"),o=n,m,k;for(m=0,k=l.length-1;o&&m<k;++m){o=o[l[m]]&&o[l[m]].children;}if(o){o.splice(l[m],0,p.column);this.set("columns",n,{originEvent:p});}},_defModifyColumnFn:function(m){var k=this.get("columns"),l=this.getColumn(m.column);if(l){b.mix(l,m.newColumnDef,true);this.set("columns",k,{originEvent:m});}},_defMoveColumnFn:function(q){var m=this.get("columns"),l=this.getColumn(q.column),n=d(q.index),k,r,s,o,p;if(l){k=l.parent?l.parent.children:m;r=h(k,l);if(r>-1){s=m;for(o=0,p=n.length-1;s&&o<p;++o){s=s[o]&&s[o].children;}if(s){k.splice(r,1);s.splice(n[o],1,l);this.set("columns",m,{originEvent:q});}}}},_defRemoveColumnFn:function(o){var l=this.get("columns"),m=this.getColumn(o.column),n,k;if(m){n=m.parent?m.parent.children:l;k=b.Array.indexOf(n,m);if(k>-1){n.splice(k,1);this.set("columns",l,{originEvent:o});}}},initializer:function(){this.publish({addColumn:{defaultFn:b.bind("_defAddColumnFn",this)},removeColumn:{defaultFn:b.bind("_defRemoveColumnFn",this)},moveColumn:{defaultFn:b.bind("_defMoveColumnFn",this)},modifyColumn:{defaultFn:b.bind("_defModifyColumnFn",this)}});}});f.prototype.addRows=f.prototype.addRow;if(g.isFunction(b.DataTable)){b.Base.mix(b.DataTable,[f]);}},"gallery-2012.02.01-21-35",{requires:["gallery-datatable-350-preview-base"]});YUI.add("gallery-datatable-350-preview-column-widths",function(e){var d=e.Lang.isNumber,b=e.Array.indexOf;e.Features.add("table","badColWidth",{test:function(){var f=e.one("body"),h,g;if(f){h=f.insertBefore('<table style="position:absolute;visibility:hidden;border:0 none">'+'<colgroup><col style="width:9px"></colgroup>'+"<tbody><tr>"+'<td style="'+"padding:0 4px;"+"font:normal 2px/2px arial;"+'border:0 none">'+"."+"</td></tr></tbody>"+"</table>",f.get("firstChild"));
g=h.one("td").getComputedStyle("width")!=="1px";h.remove(true);}return g;}});function c(){}e.mix(c.prototype,{COL_TEMPLATE:"<col/>",COLGROUP_TEMPLATE:"<colgroup/>",setColumnWidth:function(i,h){var g=this.getColumn(i),f=g&&b(this._displayColumns,g);if(f>-1){if(d(h)){h+="px";}g.width=h;this._setColumnWidth(f,h);}return this;},_createColumnGroup:function(){return e.Node.create(this.COLGROUP_TEMPLATE);},initializer:function(f){this.after("renderTable",function(g){this._uiSetColumns();this.after("columnsChange",this._uiSetColumns);});},_setColumnWidth:function(j,k){var h=this._colgroupNode,i=h&&h.all("col").item(j),l,g,f;if(i){if(k&&d(k)){k+="px";}i.setStyle("width",k);if(k&&e.Features.test("table","badColWidth")){l=this._tbodyNode&&this._tbodyNode.one("tr");g=l&&l.all("td").item(j);if(g){f=function(m){return parseInt(g.getComputedStyle(m),10)|0;};i.setStyle("width",parseInt(k,10)-f("paddingLeft")-f("paddingRight")-f("borderLeftWidth")-f("borderRightWidth")+"px");}}}},_uiSetColumns:function(){var k=this.COL_TEMPLATE,g=this._colgroupNode,j=this._displayColumns,h,f;if(!g){g=this._colgroupNode=this._createColumnGroup();this._tableNode.insertBefore(g,this._tableNode.one("> thead, > tfoot, > tbody"));}else{g.empty();}for(h=0,f=j.length;h<f;++h){g.append(k);this._setColumnWidth(h,j[h].width);}}},true);e.DataTable.ColumnWidths=c;e.Base.mix(e.DataTable,[c]);},"gallery-2012.02.01-21-35",{requires:["gallery-datatable-350-preview-base"]});YUI.add("gallery-datatable-350-preview-scroll",function(g){var e=g.Lang,b=e.isString,f=e.isNumber,d=e.isArray,c;g.DataTable.Scrollable=c=function(){};c.ATTRS={scrollable:{value:false,setter:"_setScrollable"}};g.mix(c.prototype,{scrollTo:function(i){var h;if(i&&this._tbodyNode&&(this._yScrollNode||this._xScrollNode)){if(d(i)){h=this.getCell(i);}else{if(f(i)){h=this.getRow(i);}else{if(b(i)){h=this._tbodyNode.one("#"+i);}else{if(i instanceof g.Node&&i.ancestor(".yui3-datatable")===this.get("boundingBox")){h=i;}}}}h&&h.scrollIntoView();}return this;},_CAPTION_TABLE_TEMPLATE:'<table class="{className}" role="presentation"></table>',_SCROLLBAR_TEMPLATE:'<div class="{className}"><div></div></div>',_X_SCROLLER_TEMPLATE:'<div class="{className}"></div>',_Y_SCROLLER_TEMPLATE:'<div class="{className}"><table class="{tableClassName}" role="presentation"></table></div>',_addVirtualScrollbar:function(){var h=this._yScrollNode,i=g.DOM.getScrollbarWidth()+"px",j=g.Node.create(g.Lang.sub(this._SCROLLBAR_TEMPLATE,{className:this.getClassName("virtual","scrollbar")}));this._scrollbarNode=j;j.setStyles({height:h.get("clientHeight")+"px",width:i,bottom:i});j.one("div").setStyle("height",h.get("scrollHeight")+"px");this._virtualScrollHandle=new g.EventHandle([j.on("scroll",g.rbind("_syncVirtualScroll",this)),h.on("scroll",g.rbind("_syncVirtualScroll",this))]);this.get("contentBox").appendChild(j);},_afterContentChange:function(h){this._mergeXScrollContent();this._mergeYScrollContent();this._uiSetWidth(this.get("width"));this._syncScrollUI();},_afterScrollableChange:function(h){this._uiSetScrollable();this._syncScrollUI();},_afterScrollHeightChange:function(h){this._yScroll&&this._syncScrollUI();},_bindScrollUI:function(){this.after(["dataChange","columnsChange","captionChange","heightChange"],g.bind("_afterContentChange",this));this.data.after(["add","remove","reset","*:change"],g.bind("_afterContentChange",this));},_calcScrollHeight:function(){var h=this._yScrollNode;return this.get("contentBox").get("clientHeight")-h.get("offsetTop")-h.get("offsetHeight")+h.get("clientHeight");},_createXScrollNode:function(){if(!this._xScrollNode){this._xScrollNode=g.Node.create(g.Lang.sub(this._X_SCROLLER_TEMPLATE,{className:this.getClassName("x","scroller")}));}},_createYScrollNode:function(){if(!this._yScrollNode){this._yScrollNode=g.Node.create(g.Lang.sub(this._Y_SCROLLER_TEMPLATE,{className:this.getClassName("y","scroller"),tableClassName:this.getClassName("y","scroll","table")}));}},_fixColumnWidths:function(){var l=this._tbodyNode,o=l.get("parentNode"),j=l.one("tr"),p=j&&j.all("td"),q=g.DOM.getScrollbarWidth(),h=[],k,m,n;if(p){this._tableNode.appendChild(this._tbodyNode);k=p.size()-1;n=p.item(k);this._setColumnWidth(k,(n.get("offsetWidth")+q)+"px");p.pop();h=p.get("offsetWidth");for(k=0,m=h.length;k<m;++k){this._setColumnWidth(k,h[k]+"px");}o.appendChild(this._tbodyNode);}},initializer:function(){this._setScrollProperties();this.after(["scrollableChange","heightChange","widthChange"],this._setScrollProperties);g.Do.after(this._bindScrollUI,this,"bindUI");g.Do.after(this._syncScrollUI,this,"syncUI");},_mergeXScrollContent:function(){var h=this._xScrollNode,i;this.get("boundingBox").removeClass(this.getClassName("scrollable","x"));if(h){if(this._captionNode){i=this._captionNode&&this._captionNode.ancestor("."+this.getClassName("caption","table"));this._tableNode.insertBefore(this._captionNode,this._tableNode.get("firstChild"));if(i){i.remove().destroy(true);}}h.replace(h.get("childNodes").toFrag());this._xScrollNode=null;if(this._scrollbarNode){this._virtualScrollHandle.detach();this._virtualScrollHandle=null;this._scrollbarNode.remove().destroy(true);this._scrollbarNode=null;}}},_mergeYScrollContent:function(){this.get("boundingBox").removeClass(this.getClassName("scrollable","y"));if(this._yScrollNode){this._tableNode.append(this._tbodyNode);this._yScrollNode.remove().destroy(true);this._yScrollNode=null;this._removeHeaderScrollPadding();}this._uiSetColumns();},_removeHeaderScrollPadding:function(){var l=this._theadNode.all("> tr").getDOMNodes(),j,k,h;for(k=0,h=l.length;k<h;k+=(j.rowSpan||1)){j=g.one(l[k].cells[l[k].cells.length-1]).setStyle("paddingRight","");}},_setHeaderScrollPadding:function(){var l=this._theadNode.all("> tr").getDOMNodes(),m,j,k,h;j=g.one(l[0].cells[l[0].cells.length-1]);m=(g.DOM.getScrollbarWidth()+parseInt(j.getComputedStyle("paddingRight"),10))+"px";for(k=0,h=l.length;k<h;k+=(j.rowSpan||1)){j=g.one(l[k].cells[l[k].cells.length-1]).setStyle("paddingRight",m);}},_setScrollable:function(h){if(h===true){h="xy";
}if(b(h)){h=h.toLowerCase();}return(h===false||h==="y"||h==="x"||h==="xy")?h:g.Attribute.INVALID_VALUE;},_setScrollProperties:function(){var j=this.get("scrollable")||"",i=this.get("width"),h=this.get("height");this._xScroll=i&&j.indexOf("x")>-1;this._yScroll=h&&j.indexOf("y")>-1;},_setYScrollColWidths:function(){var k=this._yScrollNode,j=k&&k.one("> table"),i,h;if(j){k.all("colgroup,col").remove();i=this._colgroupNode.cloneNode(true);i.set("id",g.stamp(i));if(!g.Features.test("table","badColWidth")){h=i.all("col").pop();h.setStyle("width",(parseInt(h.getStyle("width"),10)-1-g.DOM.getScrollbarWidth())+"px");}j.insertBefore(i,j.one("> thead, > tfoot, > tbody"));}},_splitXScrollContent:function(){var h;this._createXScrollNode();this._tableNode.wrap(this._xScrollNode);if(this._yScrollNode){this._xScrollNode.append(this._yScrollNode);}if(this._captionNode){h=g.Node.create(g.Lang.sub(this._CAPTION_TABLE_TEMPLATE,{className:this.getClassName("caption","table")}));h.setStyle("width",this.get("width"));h.insertBefore(this._captionNode,h.get("firstChild"));this.get("contentBox").insertBefore(h,this._xScrollNode);}},_splitYScrollContent:function(){var j=this._tableNode,k=this._yScrollTable,h,i;this.get("boundingBox").addClass(this.getClassName("scrollable","y"));if(!k){this._fixColumnWidths();this._setHeaderScrollPadding();i=parseInt(j.getComputedStyle("width"),10);j.setStyle("width",i+"px");this._createYScrollNode();k=this._yScrollNode;h=k.one("table");h.append(this._tbodyNode);j.insert(k,"after");k.setStyles({height:this._calcScrollHeight()+"px",width:(i-2)+"px"});h.setStyle("width",k.get("clientWidth")+"px");}this._setYScrollColWidths();},_syncScrollUI:function(){var h=this.get("contentBox"),j=this._yScrollNode||h,i=j.one("table");this._uiSetDim("width","");this._tableNode.setStyle("width","");this._uiSetScrollable();if(this._yScroll){if(i.get("scrollHeight")>j.get("clientHeight")){this._splitYScrollContent();}else{this._mergeYScrollContent();}}else{this._mergeYScrollContent();}if(this._xScroll){if(i.get("scrollWidth")>parseInt(this.get("width"),10)){this._splitXScrollContent();if(this._yScrollNode){this._yScrollNode.setStyle("height",(this._yScrollNode.get("offsetHeight")-g.DOM.getScrollbarWidth())+"px");if(g.DOM.getScrollbarWidth()){this._addVirtualScrollbar();}}}else{this._mergeXScrollContent();}}else{this._mergeXScrollContent();}this._uiSetDim("width",this.get("width"));},_syncVirtualScroll:function(i){var h=(i.currentTarget===this._scrollbarNode)?this._yScrollNode:this._scrollbarNode;h.set("scrollTop",i.currentTarget.get("scrollTop"));},_uiSetWidth:function(h){var i=this._xScrollNode||this._yScrollNode;if(f(h)){h+=this.DEF_UNIT;}if(i){this._mergeXScrollContent();this._mergeYScrollContent();this._syncScrollUI();}else{this._uiSetDim("width",h);this._tableNode.setStyle("width",h);}},_uiSetScrollable:function(){this.get("boundingBox").toggleClass(this.getClassName("scrollable","x"),this._xScroll).toggleClass(this.getClassName("scrollable","y"),this._yScroll);}},true);g.Base.mix(g.DataTable,[c]);},"gallery-2012.02.01-21-35",{requires:["gallery-datatable-350-preview-base","gallery-datatable-350-preview-column-widths","dom-screen"]});YUI.add("gallery-datatable-350-preview-sort",function(b){var h=b.Lang,e=h.isBoolean,c=h.isString,g=h.isArray,j=h.isObject,f=b.Array,i={asc:1,desc:-1,"1":1,"-1":-1};function d(){}d.ATTRS={sortable:{value:"auto",validator:"_validateSortable"},sortBy:{validator:"_validateSortBy",getter:"_getSortBy"},strings:{valueFn:function(){return b.Intl.get("datatable-sort");}}};b.mix(d.prototype,{sort:function(k,l){return this.fire("sort",b.merge((l||{}),{sortBy:k||this.get("sortBy")}));},toggleSort:function(l,r){var q=this._sortBy,s=[],n,p,m,k,o;for(n=0,p=q.length;n<p;++n){k={};k[q[n]._id]=q[n].sortDir;s.push(k);}if(l){l=f(l);for(n=0,p=l.length;n<p;++n){k=l[n];o=-1;for(m=s.length-1;n>=0;--n){if(s[m][k]){s[m][k]*=-1;break;}}}}else{for(n=0,p=s.length;n<p;++n){for(k in s[n]){if(s[n].hasOwnProperty(k)){s[n][k]*=-1;break;}}}}return this.fire("sort",b.merge((r||{}),{sortBy:s}));},_afterDataChange:function(k){if(k.prevVal!==k.newVal||k.newVal.hasOwnProperty("_compare")){this._initSortFn();}},_afterSortByChange:function(k){this._setSortBy();if(this._sortBy.length){if(!this.data.comparator){this.data.comparator=this._sortComparator;}this.data.sort();}},_bindSortUI:function(){this.after(["sortableChange","sortByChange","columnsChange"],this._uiSetSortable);if(this._theadNode){this._sortHandle=this._theadNode.delegate("click",b.rbind("_onUITriggerSort",this),"."+this.getClassName("sortable","column"));}},_defSortFn:function(k){this.set.apply(this,["sortBy",k.sortBy].concat(k.details));},destructor:function(){if(this._sortHandle){this._sortHandle.detach();}},_getSortBy:function(p,n){var o,m,k,l;n=n.slice(7);if(n==="state"){o=[];for(m=0,k=this._sortBy.length;m<k;++m){l=this._sortBy[m];o.push({column:l._id,dir:l.sortDir});}return{state:(o.length===1)?o[0]:o};}else{return p;}},initializer:function(){var k=b.bind("_parseSortable",this);this._parseSortable();this._setSortBy();this._initSortFn();this.after({renderHeader:b.bind("_renderSortable",this),dataChange:b.bind("_afterDataChange",this),sortByChange:b.bind("_afterSortByChange",this),sortableChange:k,columnsChange:k});this.publish("sort",{defaultFn:b.bind("_defSortFn",this)});},_initSortFn:function(){var k=this;this.data._compare=function(t,s){var r=0,o,p,m,n,l,q;for(o=0,p=k._sortBy.length;!r&&o<p;++o){m=k._sortBy[o];n=m.sortDir;if(m.sortFn){r=m.sortFn(t,s)*n;}else{l=t.get(m.key);q=s.get(m.key);r=(l>q)?n:((l<q)?-n:0);}}return r;};if(this._sortBy.length){this.data.comparator=this._sortComparator;this.data.sort();}else{delete this.data.comparator;}},_onUITriggerSort:function(n){var o=n.currentTarget.get("id"),l={},k=1,m;n.preventDefault();if(o){b.Array.each(this._displayColumns,function(p){if(o===p._yuid){m=p._id;k=-(p.sortDir|0)||1;}});if(m){l[m]=k;this.fire("sort",{originEvent:n,sortBy:[l]});}}},_parseSortable:function(){var o=this.get("sortable"),n=[],m,k,l;
if(g(o)){for(m=0,k=o.length;m<k;++m){l=o[m];if(!j(l,true)||g(l)){l=this.getColumn(l);}if(l){n.push(l);}}}else{if(o){n=this._displayColumns.slice();if(o==="auto"){for(m=n.length-1;m>=0;--m){if(!n[m].sortable){n.splice(m,1);}}}}}this._sortable=n;},_renderSortable:function(){this._uiSetSortable();this._bindSortUI();},_setSortBy:function(){var n=this._displayColumns,s=this.get("sortBy")||[],p=" "+this.getClassName("sorted"),o,q,k,l,r,m;this._sortBy=[];for(o=0,q=n.length;o<q;++o){m=n[o];delete m.sortDir;if(m.className){m.className=m.className.replace(p,"");}}s=f(s);for(o=0,q=s.length;o<q;++o){k=s[o];l=1;if(j(k)){r=k;for(k in r){if(r.hasOwnProperty(k)){l=i[r[k]];break;}}}if(k){m=this.getColumn(k)||{_id:k,key:k};if(m){m.sortDir=l;if(!m.className){m.className="";}m.className+=p;this._sortBy.push(m);}}}},_sortComparator:function(k){return k;},_uiSetSortable:function(){var m=this._sortable||[],r=this.getClassName("sortable","column"),n=this.getClassName("sorted"),s=this.getClassName("sorted","desc"),t=this.getClassName("sort","liner"),o,p,k,l,q;this.get("boundingBox").toggleClass(this.getClassName("sortable"),m.length);this._theadNode.all("."+r).removeClass(r).removeClass(n).removeClass(s).each(function(v){var u=v.one("."+t);if(u){u.replace(u.get("childNodes").toFrag());}});for(o=0,p=m.length;o<p;++o){k=m[o];l=this._theadNode.one("#"+k._yuid);if(l){l.addClass(r);if(k.sortDir){l.addClass(n);if(k.sortDir===-1){l.addClass(s);}}b.Node.create('<div class="'+t+'"></div>').append(l.get("childNodes").toFrag()).appendTo(l);}}},_validateSortable:function(k){return k==="auto"||e(k)||g(k);},_validateSortBy:function(k){return k===null||c(k)||j(k,true)||(g(k)&&(c(k[0])||j(k,true)));}},true);b.DataTable.Sortable=d;b.Base.mix(b.DataTable,[d]);},"gallery-2012.02.01-21-35",{requires:["gallery-datatable-350-preview-base"]});a.use("gallery-datatable-350-preview-core","gallery-datatable-350-preview-head","gallery-datatable-350-preview-body","gallery-datatable-350-preview-base","gallery-datatable-350-preview-mutable","gallery-datatable-350-preview-column-widths","gallery-datatable-350-preview-scroll","gallery-datatable-350-preview-sort");},"gallery-2012.02.01-21-35",{requires:["base-build","widget","model-list","view","escape","dom-screen"]});